import{u as k,r as G,a as J,b as e,j as a,L as g,F as K,R as Q,f as W}from"./app.8ee9396d.js";import{F as X}from"./FrontendLayout.e54e6823.js";import{S,C as D}from"./state.d698205e.js";import{S as p}from"./react-select.esm.8c846078.js";import ee from"./CheckoutLogin.df7ce1ad.js";import{u as ae,a as re,C as w}from"./react-stripe.esm.26f43368.js";import"./react-toastify.esm.b4b407d9.js";import"./react-paginate.74cec0d8.js";import"./hoist-non-react-statics.cjs.d2fea6c5.js";import"./index.9c46ddb8.js";const ne=paypal.Buttons.driver("react",{React:Q,ReactDOM:W});function fe({userById:le,userDetails:l,cartItems:v,subtotal:P,tax:F,total:_}){const O=ae(),T=re(),E=_,j="USD",R={layout:"vertical"},{flash:A}=k().props;console.log(A);const[u,H]=G.exports.useState(),i={},{auth:c}=k().props,{data:n,setData:d,post:b,processing:C,errors:N,reset:te}=J({name:c.user?c.user.name:"",lname:c.user?c.user.lname:"",email:c.user?c.user.email:"",company_name:l?l.company_name:"",country:l?l.country:"",address1:l?l.address1:"",address2:l?l.address2:"",city:l?l.city:"",state:l?l.state:"",postcode:l?l.postcode:"",phone:l?l.phone:"",ship_first_name:l?l.ship_first_name:"",ship_last_name:l?l.ship_last_name:"",ship_company_name:l?l.ship_company_name:"",ship_country:l?l.ship_country:"",ship_address1:l?l.ship_address1:"",ship_address2:l?l.ship_address2:"",ship_city:l?l.ship_city:"",ship_state:l?l.ship_state:"",ship_postcode:l?l.ship_postcode:"",ship_phone:l?l.ship_phone:"",password:"",new_password:"",shipping:"Local pickup",payment_method:"stripe",create_account:!1,shipping_different:!1,status:"Pending",note:""}),L=(r,o)=>{if((n.name==""||n.name==null)&&(console.log(n.name),i.name="The firstname field is required!"),(n.lname==""||n.lname==null)&&(i.lname="The lastname field is required!"),(n.email==""||n.email==null)&&(i.email="The email field is required!"),Object.values(i).length!=0)return H(i),o.reject()};console.log(u);const t=r=>{d(r.target.name,r.target.type==="checkbox"?r.target.checked:r.target.value)},V=async r=>{r.preventDefault();var o="";if(n.payment_method=="stripe"){const s=T.getElement(w),{token:h}=await O.createToken(s);var o=h.id}b(route("order.store",{token_id:o}))};console.log(n);const x=S.getAllStates().filter(r=>r.countryCode==n.country);var m=[];D.getAllCountries().map(r=>{m.push({value:r.isoCode,label:r.name})});const B=r=>{d("country",r.value)},$=m.find(r=>r.value==n.country),I=r=>{d("ship_country",r.value)},U=m.find(r=>r.value==n.ship_country);var f=[];x.length!=0&&x.map(r=>{f.push({value:r.isoCode,label:r.name})});const Y=r=>{d("state",r.value)},Z=f.find(r=>r.value==n.state),q=S.getAllStates().filter(r=>r.countryCode==n.ship_country);var y=[];q.length!=0&&q.map(r=>{y.push({value:r.isoCode,label:r.name})});const M=r=>{d("ship_state",r.value)},z=y.find(r=>r.value==n.ship_state);return console.log(n),e(X,{children:e("main",{className:"main main-test",children:a("div",{className:"container checkout-container",children:[a("ul",{className:"checkout-progress-bar d-flex justify-content-center flex-wrap",children:[e("li",{children:e(g,{href:route("cart.list"),children:"Shopping Cart"})}),e("li",{className:"active",children:e(g,{href:route("checkout.index"),children:"Checkout"})}),e("li",{className:"disabled",children:e(g,{href:route("order.index"),children:"Order Complete"})})]}),c.user==null?e(ee,{}):" ",a("div",{className:"checkout-discount",children:[a("h4",{children:["Have a coupon? \xA0",e("button",{"data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"true","aria-controls":"collapseOne",className:"btn btn-link btn-toggle",children:" ENTER YOUR CODE"})]}),e("div",{id:"collapseTwo",className:"collapse",children:e("div",{className:"feature-box",children:a("div",{className:"feature-box-content",children:[e("p",{children:"If you have a coupon code, please apply it below."}),e("form",{action:"#",children:a("div",{className:"input-group",children:[e("input",{type:"text",className:"form-control form-control-sm w-auto",placeholder:"Coupon code",required:""}),e("div",{className:"input-group-append",children:e("button",{className:"btn btn-sm mt-0",type:"submit",children:"Apply Coupon"})})]})})]})})})]}),a("div",{className:"row",children:[e("div",{className:"col-lg-7",children:e("ul",{className:"checkout-steps",children:a("li",{children:[e("h2",{className:"step-title",children:"Billing details"}),e("ul",{className:"ckt_erros",children:Object.values(u||{}).length!=0?Object.values(u||{}).map((r,o)=>e("li",{className:"fielderror",children:r},o)):""}),a("form",{onSubmit:V,id:"checkout-form",children:[a("div",{className:"row",children:[e("div",{className:"col-md-6",children:a("div",{className:"form-group",children:[a("label",{children:["First name ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.name,name:"name",type:"text",className:"form-control",required:!0})]})}),e("div",{className:"col-md-6",children:a("div",{className:"form-group",children:[a("label",{children:["Last name ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.lname,name:"lname",type:"text",className:"form-control",required:!0})]})})]}),a("div",{className:"form-group",children:[e("label",{children:"Company "}),e("input",{onChange:t,value:n.company_name,name:"company_name",type:"text",className:"form-control"})]}),a("div",{className:"select-custom",children:[a("label",{children:["Country / Region ",e("span",{className:"required",children:"*"})]}),e(p,{options:m,defaultValue:$||"Select a country",name:"country",classNamePrefix:"select",onChange:B})]}),a("div",{className:"form-group",children:[a("label",{children:["Street address ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.address1,name:"address1",type:"text",className:"form-control",placeholder:"House number and street name",required:!0}),e("input",{onChange:t,value:n.address2,name:"address2",type:"text",className:"form-control",placeholder:"Apartment, suite, unit, etc. (optional)"})]}),a("div",{className:"form-group",children:[a("label",{children:["Town / City ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.city,name:"city",type:"text",className:"form-control",required:!0})]}),a("div",{className:"form-group",children:[a("label",{children:["State / Country ",e("span",{className:"required",children:"*"})]}),e(p,{options:f,defaultValue:Z,name:"country",classNamePrefix:"select",onChange:Y})]}),a("div",{className:"form-group",children:[a("label",{children:["Postcode / ZIP ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.postcode,name:"postcode",type:"text",className:"form-control",required:!0})]}),a("div",{className:"form-group mb-3",children:[a("label",{children:["Phone ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.phone,name:"phone",type:"tel",className:"form-control",required:!0})]}),a("div",{className:"form-group mb-3",children:[a("label",{children:["Email address ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.email,name:"email",type:"email",className:"form-control",placeholder:"editor@gmail.com",required:!0}),N&&N.email?e("div",{className:"fielderror",children:N.email}):""]}),c.user==null?a(K,{children:[e("div",{className:"form-group mb-1",children:a("div",{className:"custom-control custom-checkbox",children:[e("input",{onChange:t,name:"create_account",type:"checkbox",className:"custom-control-input",id:"create-account",required:!0}),e("label",{className:"custom-control-label","data-toggle":"collapse","data-target":"#collapseThree","aria-controls":"collapseThree",htmlFor:"create-account",children:"Create an account?"})]})}),n.create_account?e("div",{id:"collapseThree",className:"collapser",children:a("div",{className:"form-group",children:[a("label",{children:["Create account password",e("abbr",{className:"required",title:"required",children:"*"})]}),e("input",{onChange:t,name:"password",type:"password",placeholder:"Password",className:"form-control",required:!0})]})}):""]}):"",e("div",{className:"form-group",children:a("div",{className:"custom-control custom-checkbox mt-0",children:[e("input",{onChange:t,name:"shipping_different",type:"checkbox",className:"custom-control-input",id:"different-shipping"}),e("label",{className:"custom-control-label","data-toggle":"collapse","data-target":"#collapseFour","aria-controls":"collapseFour",htmlFor:"different-shipping",children:"Ship to a different address?"})]})}),n.shipping_different?e("div",{id:"collapseFour",className:"collapser",children:a("div",{className:"shipping-info",children:[a("div",{className:"row",children:[e("div",{className:"col-md-6",children:a("div",{className:"form-group",children:[a("label",{children:["First name ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.ship_first_name,name:"ship_first_name",type:"text",className:"form-control",required:!0})]})}),e("div",{className:"col-md-6",children:a("div",{className:"form-group",children:[a("label",{children:["Last name ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.ship_last_name,name:"ship_last_name",type:"text",className:"form-control",required:!0})]})})]}),a("div",{className:"form-group",children:[e("label",{children:"Company "}),e("input",{onChange:t,value:n.ship_company_name,name:"ship_company_name",type:"text",className:"form-control"})]}),a("div",{className:"select-custom",children:[a("label",{children:["Country / Region ",e("span",{className:"required",children:"*"})]}),e(p,{options:m,defaultValue:U||"Select a country",name:"ship_country",classNamePrefix:"select",onChange:I})]}),a("div",{className:"form-group",children:[a("label",{children:["Street address ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.ship_address1,name:"ship_address1",type:"text",className:"form-control",placeholder:"House number and street name",required:!0}),e("input",{onChange:t,value:n.ship_address2,name:"ship_address2",type:"text",className:"form-control",placeholder:"Apartment, suite, unit, etc. (optional)"})]}),a("div",{className:"form-group",children:[a("label",{children:["Town / City ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.ship_city,name:"ship_city",type:"text",className:"form-control",required:!0})]}),a("div",{className:"form-group",children:[a("label",{children:["State / Country ",e("span",{className:"required",children:"*"})]}),e(p,{options:y,defaultValue:z,name:"ship_state",classNamePrefix:"select",onChange:M})]}),a("div",{className:"form-group",children:[a("label",{children:["Postcode / ZIP ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.ship_postcode,name:"ship_postcode",type:"text",className:"form-control",required:!0})]}),a("div",{className:"form-group",children:[a("label",{children:["Phone ",e("span",{className:"required",children:"*"})]}),e("input",{onChange:t,value:n.ship_phone,name:"ship_phone",type:"tel",className:"form-control",required:!0})]})]})}):"",a("div",{className:"form-group",children:[e("label",{className:"order-comments",children:"Order notes (optional)"}),e("textarea",{onChange:t,name:"note",className:"form-control",placeholder:"Notes about your order, e.g. special notes for delivery."})]})]})]})})}),e("div",{className:"col-lg-5",children:a("div",{className:"order-summary",children:[e("h3",{children:"YOUR ORDER"}),a("table",{className:"table table-mini-cart",children:[e("thead",{children:e("tr",{children:e("th",{colSpan:"2",children:"Product"})})}),e("tbody",{children:Object.values(v).length!=0?Object.values(v).map((r,o)=>a("tr",{children:[a("td",{className:"product-col",children:[a("h3",{className:"product-title",children:[a("span",{className:"checkout_product_name",children:[" ",r.name]})," \xD7",e("span",{className:"product-qty",children:r.qty})]}),r.options.attr&&r.options.attr.map((s,h)=>a("div",{className:"cart_attr",children:[s.attr_name,": ",s.term_name]},h))]}),e("td",{className:"price-col",children:e("span",{children:"$"+(r.price*r.qty).toFixed(2)})})]},o)):""}),a("tfoot",{children:[a("tr",{className:"cart-subtotal",children:[e("td",{children:e("h4",{children:"Subtotal"})}),e("td",{className:"price-col",children:a("span",{children:["$",P]})})]}),a("tr",{className:"cart-subtotal",children:[e("td",{children:e("h4",{children:"Tax"})}),e("td",{className:"price-col",children:a("span",{children:["$",F]})})]}),e("tr",{className:"order-shipping",children:a("td",{className:"text-left",colSpan:"2",children:[e("h4",{className:"m-b-sm",children:"Shipping"}),e("div",{className:"form-group form-group-custom-control",children:a("div",{className:"custom-control custom-radio d-flex",children:[e("input",{onChange:t,value:"local_pickup",type:"radio",className:"custom-control-input",name:"shipping",required:!0,defaultChecked:!0}),e("label",{className:"custom-control-label",children:"Local Pickup"})]})}),e("div",{className:"form-group form-group-custom-control mb-0",children:a("div",{className:"custom-control custom-radio d-flex mb-0",children:[e("input",{onChange:t,value:"sundorbon",type:"radio",name:"shipping",className:"custom-control-input"}),e("label",{className:"custom-control-label",children:"Sundorbon"})]})})]})}),a("tr",{className:"order-total",children:[e("td",{children:e("h4",{children:"Total"})}),e("td",{children:e("b",{className:"total-price",children:a("span",{children:["$",_]})})})]})]})]}),a("div",{className:"payment-methods",children:[e("h4",{className:"",children:"Payment methods"}),a("div",{className:"info-box with-icon p-0 payment_method_box",children:[e("input",{onChange:t,value:"stripe",name:"payment_method",type:"radio",id:"card",required:!0,defaultChecked:!0}),e("label",{htmlFor:"card",children:"Credit Card"})]}),n.payment_method=="stripe"?a("div",{className:"credit_card_wrap",children:[" ",e(w,{options:{hidePostalCode:!0}})]}):"",a("div",{className:"info-box with-icon p-0 payment_method_box",children:[e("input",{onChange:t,value:"cash_on_delivery",name:"payment_method",type:"radio",id:"cashOn",required:!0}),e("label",{htmlFor:"cashOn",children:"Cash on delivery"})]}),n.payment_method=="cash_on_delivery"?e("div",{className:"info-box with-icon p-0 payment_method_box",children:e("p",{children:"Pay when you receive the product on your door."})}):"",a("div",{className:"info-box with-icon p-0 payment_method_box",children:[e("input",{onChange:t,value:"paypal",name:"payment_method",type:"radio",id:"paypal",required:!0}),e("label",{htmlFor:"paypal",children:"Paypal"})]})]}),n.payment_method=="cash_on_delivery"||n.payment_method=="stripe"?a("button",{disabled:C,type:"submit",className:"btn btn-dark btn-place-order",form:"checkout-form",children:["Place order ",e("img",{style:C?{display:"block"}:{display:"none"},className:"btn_loader",src:"/loader_white.svg",alt:""})]}):n.payment_method=="paypal"?e(ne,{style:R,onClick:(r,o)=>L(r,o),disabled:!1,createOrder:(r,o)=>o.order.create({purchase_units:[{amount:{currency_code:j,value:E}}]}).then(s=>s),onApprove:function(r,o){return o.order.capture().then(function(s){var h=s.id;b(route("order.store",{token_id:h}))})}}):""]})})]})]})})})}export{fe as default};
