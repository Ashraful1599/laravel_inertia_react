import{a as R,r as y,j as l,b as e}from"./app.8ee9396d.js";import{D as W}from"./DashboardLayout.be011592.js";import{H as Y}from"./Header.c54a3ebc.js";import{E as B}from"./Editor.e0b08e3e.js";import{S as J}from"./react-select.esm.8c846078.js";import{X as Q}from"./react-select-animated.esm.533b1a11.js";import"./index.9c46ddb8.js";import"./react-toastify.esm.b4b407d9.js";import"./hoist-non-react-statics.cjs.d2fea6c5.js";function me({categories:O,tags:V,terms:C,attributes:v}){const{data:d,setData:h,post:A,processing:F,errors:r,reset:Z,progress:k}=R({name:" ",regular_price:" ",offer_price:" ",sku:" ",promo1:" ",promo2:" ",tax_class:"no_tax",cat_id:"",tag_id:"",image:null,image2:null,gallery:null,status:"1",fetured:"0",description:" ",product_type:"simple",variable:[]}),o=a=>{h(a.target.name,a.target.value)},H=a=>{a.preventDefault(),h("image",a.target.files[0])},D=a=>{a.preventDefault(),h("image2",a.target.files[0])},E=a=>{a.preventDefault(),h("gallery",a.target.files)},T=a=>{h("description",a)},q=a=>{a.preventDefault(),A(route("product.store"))};console.log(d);const w={};v.map(a=>w[a.name.toLowerCase()]="");const[I,$]=y.exports.useState(w);let z={...I,...{price:"",sku:""}};const[S,ae]=y.exports.useState({});v.map(a=>{var s=C.filter(i=>a.id==i.attribute_id),n=[];return s.forEach(i=>{n.push(i.id)}),S[a.name.toLowerCase()]=n});let f=[];for(const[a,s]of Object.entries(S))f.push(s.map(n=>({[a]:n})));f=f.reduce((a,s)=>a.flatMap(n=>s.map(i=>({...n,...i})))),f.map(a=>{Object.defineProperty(a,"price",{value:"",writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(a,"sku",{value:"",writable:!0,configurable:!0,enumerable:!0})});const[g,N]=y.exports.useState(f),[P,L]=y.exports.useState(v),[x,K]=y.exports.useState([]),M=a=>{var s=document.querySelectorAll(".variant_check:checked");if(s.length==1?s[0].disabled=!0:s.forEach(i=>{i.disabled=!1}),a.target.checked){const i=x.indexOf(a.target.name);i>-1&&x.splice(i,1);let m={};v.map(t=>{var p=C.filter(u=>t.id==u.attribute_id),c=[];p.forEach(u=>{c.push(u.id)}),(t.name.toLowerCase()==a.target.name||x.includes(t.name.toLowerCase())==!1)&&(m[t.name.toLowerCase()]=c)});let b=[];for(const[t,p]of Object.entries(m))b.push(p.map(c=>({[t]:c})));b=b.reduce((t,p)=>t.flatMap(c=>p.map(u=>({...c,...u})))),b.map(t=>{Object.defineProperty(t,"price",{value:"",writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(t,"sku",{value:"",writable:!0,configurable:!0,enumerable:!0})}),console.log(b),N(b),h("variable",g);var n=v.filter(t=>t.name.toLowerCase()==a.target.name);L(t=>[...t,...n])}else{K(t=>[...t,a.target.name]);let i={};v.map(t=>{var p=C.filter(u=>t.id==u.attribute_id),c=[];p.forEach(u=>{c.push(u.id)}),t.name.toLowerCase()!=a.target.name&&x.includes(t.name.toLowerCase())==!1&&(i[t.name.toLowerCase()]=c)});let m=[];for(const[t,p]of Object.entries(i))m.push(p.map(c=>({[t]:c})));m=m.reduce((t,p)=>t.flatMap(c=>p.map(u=>({...c,...u})))),m.map(t=>{Object.defineProperty(t,"price",{value:"",writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(t,"sku",{value:"",writable:!0,configurable:!0,enumerable:!0})}),N(m),h("variable",g);var n=P.filter(t=>t.name.toLowerCase()!=a.target.name);L(n)}},U=()=>{N(a=>[...a,z])};let G=a=>{let s=[...g];s.splice(a,1),h("variable",s),N(s)};const _=a=>{a.preventDefault();const s=a.target.id;N(n=>{const i=n.slice();return i[s][a.target.name]=a.target.value,i}),h("variable",g)};var j=[];V.map(a=>{j.push({value:a.id,label:a.tag_name})});const X=a=>{h("tag_id",a)};return l(W,{children:[e(Y,{title:"Product"}),e("div",{className:"container-xl px-4",children:e("form",{onSubmit:q,children:l("div",{className:"row",children:[e("div",{className:"col-lg-8",children:l("div",{className:"card mb-4",children:[e("div",{className:"card-header",children:"Product Information"}),l("div",{className:"card-body",children:[l("div",{className:"form-group",children:[e("label",{className:"col-sm-2 col-form-label",children:"Name"}),e("input",{onChange:o,value:d.name,name:"name",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.name})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:"col-sm-2 col-form-label",children:"Description"}),e(B,{apiKey:"nkkvgg6v97wpitv8o0qjvf3zsut8x3eqyb5difq13e14dzko",init:{height:400,menubar:!0,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",images_upload_url:"http://127.0.0.1:8000/imgupload",automatic_uploads:!0},onEditorChange:T}),r&&e("div",{className:"text-danger",children:r.description})]}),l("div",{className:"form-group mt-3 mb-3",children:[e("div",{className:" form-check-inline",children:e("label",{className:"form-check-label",children:"Product type:"})}),l("div",{className:"form-check form-check-inline",children:[e("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",children:"Simple"}),e("input",{onChange:o,defaultChecked:!0,name:"product_type",className:"form-check-input",type:"radio",id:"inlineCheckbox1",value:"simple"})]}),l("div",{className:"form-check form-check-inline",children:[e("label",{className:"form-check-label",htmlFor:"inlineCheckbox2",children:"Variable"}),e("input",{onChange:o,name:"product_type",className:"form-check-input",type:"radio",id:"inlineCheckbox2",value:"variable"})]})]}),d.product_type==="simple"?l("div",{className:"d-flex align-items-start",children:[l("div",{className:"nav flex-column nav-pills me-3",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e("button",{className:"nav-link active",id:"v-pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-home",type:"button",children:"Price"}),e("button",{className:"nav-link",id:"v-pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-profile",type:"button",children:"SKU"}),e("button",{className:"nav-link",id:"v-pills-messages-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-messages",type:"button",children:"Tax class"}),e("button",{className:"nav-link",id:"v-pills-settings-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-settings",type:"button",children:"Promo label"})]}),l("div",{className:"tab-content product_tab_content",id:"v-pills-tabContent",children:[l("div",{className:"tab-pane fade show active",id:"v-pills-home",role:"tabpanel","aria-labelledby":"v-pills-home-tab",children:[l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Regular Price"}),e("input",{onChange:o,value:d.regular_price,name:"regular_price",type:"number",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.regular_price})]}),l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Offer Price"}),e("input",{onChange:o,value:d.offer_price,name:"offer_price",type:"number",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.offer_price})]})]}),e("div",{className:"tab-pane fade",id:"v-pills-profile",role:"tabpanel","aria-labelledby":"v-pills-profile-tab",children:l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"SKU"}),e("input",{onChange:o,value:d.sku,name:"sku",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.sku})]})}),e("div",{className:"tab-pane fade",id:"v-pills-messages",role:"tabpanel","aria-labelledby":"v-pills-messages-tab",children:l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Tax class"}),l("select",{onChange:o,className:"form-select",name:"tax_class",defaultValue:"no_tax",children:[e("option",{value:"",children:"Select a tax class"}),e("option",{value:"no_tax",children:"No tax"}),e("option",{value:"standard",children:"Standard"})]})]})}),l("div",{className:"tab-pane fade",id:"v-pills-settings",role:"tabpanel","aria-labelledby":"v-pills-settings-tab",children:[l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 1"}),e("input",{onChange:o,value:d.promo1,name:"promo1",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo1})]}),l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 2"}),e("input",{onChange:o,value:d.promo2,name:"promo2",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo2})]})]})]})]}):l("div",{className:"d-flex align-items-start",children:[l("div",{className:"nav flex-column nav-pills me-3",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e("button",{className:"nav-link active",id:"v-pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-home",type:"button",children:"Variable"}),e("button",{className:"nav-link",id:"v-pills-messages-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-messages",type:"button",children:"Tax class"}),e("button",{className:"nav-link",id:"v-pills-settings-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-settings",type:"button",children:"Promo label"})]}),l("div",{className:"tab-content product_tab_content",id:"v-pills-tabContent",children:[e("div",{className:"tab-pane fade show active",id:"v-pills-home",role:"tabpanel","aria-labelledby":"v-pills-home-tab",children:l("div",{children:[l("div",{className:"row",children:[e("div",{className:"col-sm-4",children:e("button",{className:"btn btn-secondary ",type:"button",onClick:U,children:"Add variable"})}),e("div",{className:"col-sm-8",children:v.map((a,s)=>l("div",{className:"form-check form-check-inline",children:[e("input",{onChange:M,defaultChecked:!0,name:a.name.toLowerCase(),className:"form-check-input variant_check",type:"checkbox",value:a.name.toLowerCase()}),e("label",{className:"form-check-label",children:a.name})]},s))})]}),g.map((a,s)=>l("div",{className:"row mt-3 variable_row",children:[P.map((n,i)=>e("div",{className:"col-sm attr_"+n.name.toLowerCase(),children:n.name?l("select",{required:!0,value:a[n.name.toLowerCase()],name:n.name.toLowerCase(),onChange:_,id:s,className:"form-select "+a[n.name.toLowerCase()],children:[l("option",{className:"firstItem"+n.name.toLowerCase(),value:n.name.toLowerCase(),children:["Select ",n.name]}),n.terms.map((m,b)=>e("option",{value:m.id,children:m.name},b))]}):""},i)),e("div",{className:"col-sm",children:e("input",{onChange:_,required:!0,placeholder:"Enter price",name:"price",value:a.price,id:s,type:"number",size:"40",className:"form-control"})}),l("div",{className:"col-sm",children:[e("input",{onChange:_,placeholder:"Enter SKU",name:"sku",value:a.sku,id:s,type:"text",size:"40",className:"form-control"}),l("button",{type:"button",className:" variable_remove",onClick:()=>G(s),children:[" ",e(Q,{})," "]})]})]},s))]})}),e("div",{className:"tab-pane fade",id:"v-pills-messages",role:"tabpanel","aria-labelledby":"v-pills-messages-tab",children:l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Tax class"}),l("select",{onChange:o,className:"form-select",name:"tax_class",defaultValue:"no_tax",children:[e("option",{value:"",children:"Select a tax class"}),e("option",{value:"no_tax",children:"No tax"}),e("option",{value:"standard",children:"Standard"})]})]})}),l("div",{className:"tab-pane fade",id:"v-pills-settings",role:"tabpanel","aria-labelledby":"v-pills-settings-tab",children:[l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 1"}),e("input",{onChange:o,value:d.promo1,name:"promo1",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo1})]}),l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 2"}),e("input",{onChange:o,value:d.promo2,name:"promo2",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo2})]})]})]})]})]})]})}),e("div",{className:"col-lg-4",children:l("div",{className:"card mb-4 nav-sticky",children:[e("div",{className:"card-header",children:"Product Information"}),l("div",{className:"card-body",children:[l("div",{className:"form-group",children:[e("label",{className:"col-sm-2 col-form-label",children:"Category"}),l("select",{className:"form-control",onChange:o,name:"cat_id",defaultValue:"general",children:[e("option",{children:"Select a Category"}),O.map((a,s)=>e("option",{value:a.id,children:a.cat_name},s))]}),r&&e("div",{className:"text-danger",children:r.cat_id})]}),l("div",{className:"form-group",children:[e("label",{className:"col-sm-2 col-form-label",children:"Tag"}),e(J,{isMulti:!0,options:j,name:"tag_id",classNamePrefix:"select",onChange:X}),r&&e("div",{className:"text-danger",children:r.tag_id})]}),l("div",{className:"form-group",children:[e("label",{className:" col-form-label",children:"Fetured"}),l("select",{className:"form-control",onChange:o,name:"fetured",defaultValue:d.fetured,children:[e("option",{children:"Select featured status"}),e("option",{value:"0",children:"No"}),e("option",{value:"1",children:"Yes"})]}),r&&e("div",{className:"text-danger",children:r.fetured})]}),l("div",{className:"form-group",children:[e("label",{className:" col-form-label",children:"Status"}),l("select",{className:"form-control",onChange:o,name:"status",defaultValue:d.status,children:[e("option",{value:"1",children:"Publish"}),e("option",{value:"0",children:"Draft"})]}),r&&e("div",{className:"text-danger",children:r.status})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:" col-form-label",children:"Small image"}),e("input",{onChange:H,name:"image",type:"file",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.image})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:" col-form-label",children:"Small image on hover"}),e("input",{onChange:D,name:"image2",type:"file",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.image2})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:" col-form-label",children:"Gallery (you can select multiple images)"}),e("input",{multiple:"multiple",onChange:E,name:"gallery",type:"file",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.gallery})]}),e("div",{className:"row",children:k&&l("progress",{value:k.percentage,max:"100",children:[k.percentage,"%"]})}),e("button",{disabled:F,type:"submit",className:"btn btn-primary",children:"Save"})]})]})})]})})})]})}export{me as default};
