import{a as W,r as x,j as l,b as e}from"./app.8ee9396d.js";import{D as Y}from"./DashboardLayout.be011592.js";import{H as B}from"./Header.c54a3ebc.js";import{E as Q}from"./Editor.e0b08e3e.js";import{S as Z}from"./react-select.esm.8c846078.js";import{X as $}from"./react-select-animated.esm.533b1a11.js";import"./index.9c46ddb8.js";import"./react-toastify.esm.b4b407d9.js";import"./hoist-non-react-statics.cjs.d2fea6c5.js";function ue({categories:V,tags:A,terms:C,attributes:f,product:o}){console.log(o);const{data:c,setData:b,post:F,processing:H,errors:r,reset:ee,progress:_}=W({name:o.name,slug:o.slug,regular_price:o.regular_price,offer_price:o.offer_price,sku:o.sku,promo1:o.promo1,promo2:o.promo2,tax_class:o.tax_class,cat_id:o.cat_id,tag_id:o.tag_id,image:null,image2:null,gallery:null,status:o.status,fetured:o.fetured,description:o.description,product_type:o.product_type,variable:JSON.parse(o.variable)}),d=a=>{b(a.target.name,a.target.value)},D=a=>{a.preventDefault(),b("image",a.target.files[0])},E=a=>{a.preventDefault(),b("image2",a.target.files[0])},T=a=>{a.preventDefault(),b("gallery",a.target.files)},q=a=>{b("description",a)},I=a=>{a.preventDefault(),F(route("product.store"))};console.log(c);const S={};f.map(a=>S[a.name.toLowerCase()]="");const[z,ae]=x.exports.useState(S);let K={...z,...{price:"",sku:""}};const[P,re]=x.exports.useState({});f.map(a=>{var s=C.filter(i=>a.id==i.attribute_id),n=[];return s.forEach(i=>{n.push(i.id)}),P[a.name.toLowerCase()]=n});let g=[];for(const[a,s]of Object.entries(P))g.push(s.map(n=>({[a]:n})));g=g.reduce((a,s)=>a.flatMap(n=>s.map(i=>({...n,...i})))),g.map(a=>{Object.defineProperty(a,"price",{value:"",writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(a,"sku",{value:"",writable:!0,configurable:!0,enumerable:!0})});const[N,y]=x.exports.useState(g),[L,j]=x.exports.useState(f),[k,M]=x.exports.useState([]),U=JSON.parse(o.variable),G=a=>{var s=document.querySelectorAll(".variant_check:checked");if(s.length==1?s[0].disabled=!0:s.forEach(i=>{i.disabled=!1}),a.target.checked){const i=k.indexOf(a.target.name);i>-1&&k.splice(i,1);let p={};f.map(t=>{var u=C.filter(h=>t.id==h.attribute_id),m=[];u.forEach(h=>{m.push(h.id)}),(t.name.toLowerCase()==a.target.name||k.includes(t.name.toLowerCase())==!1)&&(p[t.name.toLowerCase()]=m)});let v=[];for(const[t,u]of Object.entries(p))v.push(u.map(m=>({[t]:m})));v=v.reduce((t,u)=>t.flatMap(m=>u.map(h=>({...m,...h})))),v.map(t=>{Object.defineProperty(t,"price",{value:"",writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(t,"sku",{value:"",writable:!0,configurable:!0,enumerable:!0})}),console.log(v),y(v),b("variable",N);var n=f.filter(t=>t.name.toLowerCase()==a.target.name);j(t=>[...t,...n])}else{M(t=>[...t,a.target.name]);let i={};f.map(t=>{var u=C.filter(h=>t.id==h.attribute_id),m=[];u.forEach(h=>{m.push(h.id)}),t.name.toLowerCase()!=a.target.name&&k.includes(t.name.toLowerCase())==!1&&(i[t.name.toLowerCase()]=m)});let p=[];for(const[t,u]of Object.entries(i))p.push(u.map(m=>({[t]:m})));p=p.reduce((t,u)=>t.flatMap(m=>u.map(h=>({...m,...h})))),p.map(t=>{Object.defineProperty(t,"price",{value:"",writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(t,"sku",{value:"",writable:!0,configurable:!0,enumerable:!0})}),y(p),b("variable",N);var n=L.filter(t=>t.name.toLowerCase()!=a.target.name);j(n)}},J=()=>{y(a=>[...a,K])};let X=a=>{let s=[...N];s.splice(a,1),b("variable",s),y(s)};const w=a=>{a.preventDefault();const s=a.target.id;y(n=>{const i=n.slice();return i[s][a.target.name]=a.target.value,i}),b("variable",N)};var O=[];A.map(a=>{O.push({value:a.id,label:a.tag_name})});const R=a=>{b("tag_id",a)};return console.log(N),l(Y,{children:[e(B,{title:"Product"}),e("div",{className:"container-xl px-4",children:e("form",{onSubmit:I,children:l("div",{className:"row",children:[e("div",{className:"col-lg-8",children:l("div",{className:"card mb-4",children:[e("div",{className:"card-header",children:"Product Information"}),l("div",{className:"card-body",children:[l("div",{className:"form-group",children:[e("label",{className:"col-sm-2 col-form-label",children:"Name"}),e("input",{onChange:d,value:c.name,name:"name",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.name})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:"col-sm-2 col-form-label",children:"Description"}),e(Q,{apiKey:"nkkvgg6v97wpitv8o0qjvf3zsut8x3eqyb5difq13e14dzko",initialValue:c.description,init:{height:400,menubar:!0,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",images_upload_url:"http://127.0.0.1:8000/imgupload",automatic_uploads:!0},onEditorChange:q}),r&&e("div",{className:"text-danger",children:r.description})]}),l("div",{className:"form-group mt-3 mb-3",children:[e("div",{className:" form-check-inline",children:e("label",{className:"form-check-label",children:"Product type:"})}),l("div",{className:"form-check form-check-inline",children:[e("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",children:"Simple"}),e("input",{onChange:d,checked:c.product_type=="simple",name:"product_type",className:"form-check-input",type:"radio",id:"inlineCheckbox1",value:"simple"})]}),l("div",{className:"form-check form-check-inline",children:[e("label",{className:"form-check-label",htmlFor:"inlineCheckbox2",children:"Variable"}),e("input",{onChange:d,checked:c.product_type=="variable",name:"product_type",className:"form-check-input",type:"radio",id:"inlineCheckbox2",value:"variable"})]})]}),c.product_type==="simple"?l("div",{className:"d-flex align-items-start",children:[l("div",{className:"nav flex-column nav-pills me-3",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e("button",{className:"nav-link active",id:"v-pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-home",type:"button",children:"Price"}),e("button",{className:"nav-link",id:"v-pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-profile",type:"button",children:"SKU"}),e("button",{className:"nav-link",id:"v-pills-messages-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-messages",type:"button",children:"Tax class"}),e("button",{className:"nav-link",id:"v-pills-settings-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-settings",type:"button",children:"Promo label"})]}),l("div",{className:"tab-content product_tab_content",id:"v-pills-tabContent",children:[l("div",{className:"tab-pane fade show active",id:"v-pills-home",role:"tabpanel","aria-labelledby":"v-pills-home-tab",children:[l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Regular Price"}),e("input",{onChange:d,value:c.regular_price,name:"regular_price",type:"number",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.regular_price})]}),l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Offer Price"}),e("input",{onChange:d,value:c.offer_price,name:"offer_price",type:"number",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.offer_price})]})]}),e("div",{className:"tab-pane fade",id:"v-pills-profile",role:"tabpanel","aria-labelledby":"v-pills-profile-tab",children:l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"SKU"}),e("input",{onChange:d,value:c.sku,name:"sku",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.sku})]})}),e("div",{className:"tab-pane fade",id:"v-pills-messages",role:"tabpanel","aria-labelledby":"v-pills-messages-tab",children:l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Tax class"}),l("select",{onChange:d,className:"form-select",name:"tax_class",defaultValue:"no_tax",children:[e("option",{value:"",children:"Select a tax class"}),e("option",{value:"no_tax",children:"No tax"}),e("option",{value:"standard",children:"Standard"})]})]})}),l("div",{className:"tab-pane fade",id:"v-pills-settings",role:"tabpanel","aria-labelledby":"v-pills-settings-tab",children:[l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 1"}),e("input",{onChange:d,value:c.promo1,name:"promo1",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo1})]}),l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 2"}),e("input",{onChange:d,value:c.promo2,name:"promo2",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo2})]})]})]})]}):l("div",{className:"d-flex align-items-start",children:[l("div",{className:"nav flex-column nav-pills me-3",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e("button",{className:"nav-link active",id:"v-pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-home",type:"button",children:"Variable"}),e("button",{className:"nav-link",id:"v-pills-messages-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-messages",type:"button",children:"Tax class"}),e("button",{className:"nav-link",id:"v-pills-settings-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-settings",type:"button",children:"Promo label"})]}),l("div",{className:"tab-content product_tab_content",id:"v-pills-tabContent",children:[e("div",{className:"tab-pane fade show active",id:"v-pills-home",role:"tabpanel","aria-labelledby":"v-pills-home-tab",children:l("div",{children:[l("div",{className:"row",children:[e("div",{className:"col-sm-4",children:e("button",{className:"btn btn-secondary ",type:"button",onClick:J,children:"Add variable"})}),e("div",{className:"col-sm-8",children:f.map((a,s)=>l("div",{className:"form-check form-check-inline",children:[e("input",{onChange:G,defaultChecked:!0,name:a.name.toLowerCase(),className:"form-check-input variant_check",type:"checkbox",value:a.name.toLowerCase()}),e("label",{className:"form-check-label",children:a.name})]},s))})]}),U.map((a,s)=>l("div",{className:"row mt-3 variable_row",children:[L.map((n,i)=>e("div",{className:"col-sm attr_"+n.name.toLowerCase(),children:n.name?l("select",{required:!0,value:a[n.name.toLowerCase()],name:n.name.toLowerCase(),onChange:w,id:s,className:"form-select "+a[n.name.toLowerCase()],children:[l("option",{className:"firstItem"+n.name.toLowerCase(),value:n.name.toLowerCase(),children:["Select ",n.name]}),n.terms.map((p,v)=>e("option",{value:p.id,children:p.name},v))]}):""},i)),e("div",{className:"col-sm",children:e("input",{onChange:w,required:!0,placeholder:"Enter price",name:"price",value:a.price,id:s,type:"number",size:"40",className:"form-control"})}),l("div",{className:"col-sm",children:[e("input",{onChange:w,placeholder:"Enter SKU",name:"sku",value:a.sku,id:s,type:"text",size:"40",className:"form-control"}),l("button",{type:"button",className:" variable_remove",onClick:()=>X(s),children:[" ",e($,{})," "]})]})]},s))]})}),e("div",{className:"tab-pane fade",id:"v-pills-messages",role:"tabpanel","aria-labelledby":"v-pills-messages-tab",children:l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Tax class"}),l("select",{onChange:d,className:"form-select",name:"tax_class",defaultValue:"no_tax",children:[e("option",{value:"",children:"Select a tax class"}),e("option",{value:"no_tax",children:"No tax"}),e("option",{value:"standard",children:"Standard"})]})]})}),l("div",{className:"tab-pane fade",id:"v-pills-settings",role:"tabpanel","aria-labelledby":"v-pills-settings-tab",children:[l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 1"}),e("input",{onChange:d,value:c.promo1,name:"promo1",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo1})]}),l("div",{className:"form-group",children:[e("label",{className:"col-form-label",children:"Promotional label 2"}),e("input",{onChange:d,value:c.promo2,name:"promo2",type:"text",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.promo2})]})]})]})]})]})]})}),e("div",{className:"col-lg-4",children:l("div",{className:"card mb-4 nav-sticky",children:[e("div",{className:"card-header",children:"Product Information"}),l("div",{className:"card-body",children:[l("div",{className:"form-group",children:[e("label",{className:"col-sm-2 col-form-label",children:"Category"}),l("select",{className:"form-control",onChange:d,name:"cat_id",defaultValue:"general",children:[e("option",{children:"Select a Category"}),V.map((a,s)=>e("option",{value:a.id,children:a.cat_name},s))]}),r&&e("div",{className:"text-danger",children:r.cat_id})]}),l("div",{className:"form-group",children:[e("label",{className:"col-sm-2 col-form-label",children:"Tag"}),e(Z,{isMulti:!0,options:O,name:"tag_id",classNamePrefix:"select",onChange:R}),r&&e("div",{className:"text-danger",children:r.tag_id})]}),l("div",{className:"form-group",children:[e("label",{className:" col-form-label",children:"Fetured"}),l("select",{className:"form-control",onChange:d,name:"fetured",defaultValue:c.fetured,children:[e("option",{children:"Select featured status"}),e("option",{value:"0",children:"No"}),e("option",{value:"1",children:"Yes"})]}),r&&e("div",{className:"text-danger",children:r.fetured})]}),l("div",{className:"form-group",children:[e("label",{className:" col-form-label",children:"Status"}),l("select",{className:"form-control",onChange:d,name:"status",defaultValue:c.status,children:[e("option",{value:"1",children:"Publish"}),e("option",{value:"0",children:"Draft"})]}),r&&e("div",{className:"text-danger",children:r.status})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:" col-form-label",children:"Small image"}),e("input",{onChange:D,name:"image",type:"file",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.image})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:" col-form-label",children:"Small image on hover"}),e("input",{onChange:E,name:"image2",type:"file",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.image2})]}),l("div",{className:"form-group mb-3",children:[e("label",{className:" col-form-label",children:"Gallery (you can select multiple images)"}),e("input",{multiple:"multiple",onChange:T,name:"gallery",type:"file",className:"form-control"}),r&&e("div",{className:"text-danger",children:r.gallery})]}),e("div",{className:"row",children:_&&l("progress",{value:_.percentage,max:"100",children:[_.percentage,"%"]})}),e("button",{disabled:H,type:"submit",className:"btn btn-primary",children:"Save"})]})]})})]})})})]})}export{ue as default};
